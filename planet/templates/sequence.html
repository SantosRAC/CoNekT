{% extends 'base.html' %}

{% block container %}
<div class="top-pad">

    {% if sequence %}
    <h1>Sequence: <strong>{{ sequence.name }}</strong> <small>({{ sequence.type }})</small></h1>

    Species: <em><a href="{{ url_for('species.species_view', species_id=sequence.species.id) }}">{{ sequence.species.name }}</a></em>
    <br />


    <h3>Coding Sequence <small>(length: {{ sequence.coding_sequence|length }} bp)</small></h3>
    <div class="well sequence">{{ sequence.coding_sequence }}</div>

    <br />
    <h3>Sequence details</h3>
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">GO annotation</div>
                {% if sequence.go_labels.count() > 0 %}
                <div class="table-responsive">
                    <table class="table  table-striped">
                        <thead>
                            <tr>
                                <th>Label</th>
                                <th>Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for go in sequence.go_labels %}
                            <tr>
                                <td><a href="{{ url_for('go.go_view', go_id=go.id) }}" data-toggle="tooltip"
                                       data-placement="top" title="{{ go.description }}">{{ go.label }}</a></td>
                                <td>{{ go.name }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="panel-body">
                    <p>No GO annotation available for this sequence</p>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">InterPro domains</div>
                {% if sequence.interpro_domains.count() > 0 %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Label</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for domain in sequence.interpro_domains %}
                            <tr>
                                <td><a href="{{ url_for('interpro.interpro_view', interpro_id=domain.id) }}">{{ domain.label }}</a></td>
                                <td>{{ domain.description }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="panel-body">
                    <p>No InterPro domains available for this sequence</p>
                </div>
                {% endif %}
            </div>
        </div> <!-- end col -->

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">Gene Families</div>
                {% if sequence.families.count() > 0 %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Method</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for family in sequence.families %}
                            <tr>
                                <td><a href="{{ url_for('family.family_view', family_id=family.id) }}">{{ family.name }}</a></td>
                                <td>{{ family.method.method }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="panel-body">
                    <p>This sequence isn't a member of any gene families</p>
                </div>
                {% endif %}
            </div>
        </div> <!-- end col -->
    </div> <!-- end row -->
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="panel panel-default">
                <div class="panel-heading">Expression Profiles</div>
                {% if sequence.expression_profiles.count() > 0 %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Probe name</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for profile in sequence.expression_profiles %}
                            <tr>
                                <td><a href="{{ url_for('expression_profile.expression_profile_view', profile_id=profile.id) }}">{{ profile.probe }}</a></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="panel-body">
                    <p>This sequence isn't a member of any gene families</p>
                </div>
                {% endif %}

    </div>
    {% endif %}
</div>

</div>
{% endblock %}

{% block extrajs %}
<script>
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
</script>
{% endblock %}