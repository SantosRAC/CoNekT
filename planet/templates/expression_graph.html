{% extends 'base.html' %}

{% block container %}
<div class=container-fluid">
    <div class="row">
        <div class="col-sm-4 col-md-3 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="#"><strong>Options</strong></a></li>
            <li><br/></li>
            {% if node %}
            <li><p>Depth</p>
                <div class="text-center">
                    <div class="btn-group" role="group">
                        <a href="#" role="button" class="btn btn-primary cy-depth-filter" cutoff=1>Direct</a>
                        <a href="#" role="button" class="btn btn-primary cy-depth-filter active" cutoff=2>2<sup>nd</sup> Degree</a>
                    </div>
                </div>
            </li>
            <li><hr /></li>
            {% endif %}
            <li><p>Nodes</p></li>
            <li>
                <div class="row">
                <div class="col-md-6 col-sm-12">
                    <label>Color</label><br />
                    <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Default <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" class="cy-node-color" attr="color">Default</a></li>
                        {% if node %}
                        <li><a href="#" class="cy-node-color" attr="depth_color">Depth</a></li>
                        {% endif %}
                        <li><a href="#" class="cy-node-color" attr="family_color">Family</a></li>
                        {% if cluster %}
                        <li><a href="#" class="cy-node-color" attr="neighbors">Neighbors</a></li>
                        {% endif %}
                    </ul>
                    </div>
                </div>
                <div class="col-lg-6 col-md-12">
                    <label>Shape</label><br />
                    <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Default <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" class="cy-node-shape" attr="shape">Default</a></li>
                        <li><a href="#" class="cy-node-shape" attr="family_shape">Family</a></li>
                    </ul>
                    </div>
                </div>
                </div>
            </li>
            <li><hr /></li>
            <li><p>Edges</p></li>
            <li>
                <div class="row">
                <div class="col-lg-6 col-md-12">
                    <label>Color</label><br />
                    <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Default <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" class="cy-edge-color" attr="color">Default</a></li>
                        {% if node %}
                        <li><a href="#" class="cy-edge-color" attr="depth_color">Depth</a></li>
                        {% endif %}
                        <li><a href="#" class="cy-edge-color" attr="link_score">Score</a></li>
                    </ul>
                    </div>
                </div>
                <div class="col-lg-6 col-md-12">
                    <label>Width</label><br />
                    <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Default <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" class="cy-edge-width" attr="default">Default</a></li>
                        {% if node %}
                        <li><a href="#" class="cy-edge-width" attr="depth">Depth</a></li>
                        {% endif %}
                    </ul>
                    </div>
                </div>
                </div>
            </li>
            <li>
                <div>
                <br /><p><strong>Score</strong> <span id="cy-edge-score-value" class="text-muted">30</span></p>
                <input id="cy-edge-score" data-slider-id='cy-edge-score-slider' type="text" data-slider-min="0" data-slider-max="150" data-slider-step="1" data-slider-value="30" data-slider-tooltip="hide"/>
                </div>
            </li>
            <li><hr /></li>
            <li><p>Layout</p></li>
            <li>
                <div class="row">
                <div class="col-lg-6 col-md-12">
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Concentric <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" class="cy-layout" layout="breadthfirst">Breadthfirst</a></li>
                        <li><a href="#" class="cy-layout" layout="circle">Circle</a></li>
                        <li><a href="#" class="cy-layout" layout="concentric">Concentric</a></li>
                        <li><a href="#" class="cy-layout" layout="cose">Cose</a></li>
                        <li><a href="#" class="cy-layout" layout="grid">Grid</a></li>
                        <li class="divider"></li>
                        <li><a href="#" class="cy-layout" layout="random">Random</a></li>
                    </ul>
                </div>
                </div></div>

            </li>
            <li><hr /></li>
            {% if node %}
            <li><div><a href="{{ url_for('expression_network.expression_network_json', node_id=node.id, depth=depth) }}" type="button" class="btn btn-default" id="cy-download-json" download="cytoscape.json">Download JSON</a></div></li>
            {% elif cluster %}
            <li><div><a href="{{ url_for('expression_cluster.expression_cluster_json', cluster_id=cluster.id) }}" type="button" class="btn btn-default" id="cy-download-json" download="cytoscape.json">Download JSON</a></div></li>
            {% endif %}
              <!--<li><div><a href="#" type="button" class="btn btn-default" id="cy-download-img" download="Canvas.png">Download image</a></div></li>-->
          </ul>
          <!--<canvas id="png-eg" width="500" height="500"></canvas>-->
        </div>
        <div class="col-sm-8 col-sm-offset-4 col-md-9 col-md-offset-3 main">
            {% if node %}
            <h1>Expression Graph: <strong>{{ node.probe }}</strong> <small>({{ node.method.description }})</small></h1>
            <div id="cy" json="{{ url_for('expression_network.expression_network_json', node_id=node.id, depth=depth) }}"></div>
            {% elif cluster %}
             <h1>Coexpression cluster: <strong>{{ cluster.name }}</strong><br /><small>{{ cluster.method.method }}</small></h1>
             <a href="{{ url_for('expression_cluster.expression_cluster_view', cluster_id=cluster.id) }}">View table</a>
            <div id="cy" json="{{ url_for('expression_cluster.expression_cluster_json', cluster_id=cluster.id) }}"></div>
            {% endif %}
        </div>
    </div>
</div>

</div>
{% endblock %}

{% block extrajs %}
<script src="{{ url_for('static', filename='js/bootstrap-slider.min.js') }}"></script>
<script>
$('#cy-edge-score').slider({
	formatter: function(value) {
		return 'Cut-off: ' + value;
	}
});
$('#cy-edge-score').on("slide", function(slideEvt) {
	$("#cy-edge-score-value").text(slideEvt.value);
});
</script>
<script src="{{ url_for('static', filename='js/cytoscape.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.qtip.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/cytoscape-qtip.js') }}"></script>
<script src="{{ url_for('static', filename='js/planet_graph.js') }}"></script>
{% endblock %}