{% extends 'base.html' %}

{% block container %}
<div class="top-pad">

    <h1>Search: Enriched Clusters</h1>
        <div class="row">
            <div class="col-md-4 col-md-offset-4 col-xs-8 col-xs-offset-2">
                <div class="panel panel-default">
                    <div class="panel-heading"><strong>Search options</strong></div>
                    <div class="panel-body">
                        <form method="POST"  action="{{ url_for('search.search_enriched_clusters') }}"  role="form">
                            {{ form.csrf_token }}
                            <label>GO</label>
                            {{form.go_term(class_="form-control") }}<br />
                            <label>Species</label>
                            {{form.species_id(class_="form-control") }}<br />
                            <div class="checkbox-group">
                            <label>{{form.check_enrichment(checked=False) }} <span class="title">Enrichment</span> </label><br />
                            {{form.min_enrichment(class_="form-control") }}<br />
                            </div>
                            <div class="checkbox-group">
                            <label>{{form.check_p(checked=False) }} <span class="title">p-value</span></label><br />
                            {{form.max_p(class_="form-control") }}<br />
                            </div>
                            <div class="checkbox-group">
                            <label>{{form.check_corrected_p(checked=True) }} <span class="title">corrected p-value</span></label><br />
                            {{form.max_corrected_p(class_="form-control") }}<br />
                            </div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</div>
{% endblock %}

{% block extrajs %}
<script>
$(function () {

    function update_checks( element ) {
         if (element.prop( "checked" )) {
            element.closest( ".checkbox-group" ).find(".title").removeClass("text-muted");
            element.closest( ".checkbox-group" ).find(":text").prop('disabled', false);
        } else {
            element.closest( ".checkbox-group" ).find(".title").addClass("text-muted");
            element.closest( ".checkbox-group" ).find(":text").prop('disabled', true);
        }
    }

    $( ":checkbox" ).each( function () {
        update_checks( $( this) );
    });
    $( ":checkbox" ).click( function() {
        update_checks( $( this) );
    });
});
</script>
{% endblock %}